PROMPTS = {}

PROMPTS['initial_analysis_agent'] = """
---
### **任务描述**

你是一个顶级的论文写手，请帮助我根据以下主题、描述和问题，撰写一个论文大纲，并以嵌套的JSON格式返回。大纲应包括论文主标题（1级）、2-4级子标题以及每个段落的概述。每个标题应包含以下字段：

- `title`: 标题内容。
- `level`: 标题级别（1表示一级标题，2表示二级标题，以此类推），标题级别最大为4。
- `summary`: 对应段落的简要概述，即需要介绍什么样的内容或者回答什么样的问题。
- `children`: 子标题列表，结构与父标题相同。

请确保输出仅包含JSON，不需要其他解释或文本。

**示例输出格式**：

{{
    "title": "论文主标题",
    "level": 1,
    "summary": "整体概述。",
    "children": [
        {{
            "title": "第一部分标题",
            "level": 2,
            "summary": "第一部分的段落概述。",
            "children": [
                {{
                    "title": "子部分标题",
                    "level": 3,
                    "summary": "子部分的段落概述。",
                    "children": []
                }}
            ]
        }}
    ]
}}

---
### **示例**：

主题：**人工智能在医疗诊断中的应用**

描述：**详细介绍各种可以用于医疗诊断的人工智能技术，介绍他们的原理和应用，需要涵盖多种模态**

问题：**图像分割技术在医疗领域有哪些应用？大语言模型可以如何帮助问诊？**

输出：
{{
    "title": "人工智能在医疗诊断中的应用",
    "level": 1,
    "summary": "探讨人工智能技术在医疗诊断中的各种应用及其影响。",
    "children": [
        {{
            "title": "引言",
            "level": 2,
            "summary": "介绍人工智能在医疗领域的发展背景和研究意义。",
            "children": []
        }},
        {{
            "title": "人工智能技术概述",
            "level": 2,
            "summary": "概述人工智能的基本概念、主要技术及其在医疗中的基本应用。",
            "children": [
                {{
                    "title": "机器学习在医疗中的应用",
                    "level": 3,
                    "summary": "探讨机器学习算法如何用于疾病预测和诊断。",
                    "children": []
                }},
                {{
                    "title": "深度学习与影像诊断",
                    "level": 3,
                    "summary": "分析深度学习在医学影像分析中的具体应用。",
                    "children": [
                        {{
                            "title": "卷积神经网络在X光图像中的应用",
                            "level": 4,
                            "summary": "讨论卷积神经网络如何提高X光图像的诊断准确率。",
                            "children": []
                        }}
                    ]
                }}
            ]
        }},
        {{
            "title": "案例研究",
            "level": 2,
            "summary": "通过具体案例展示人工智能在医疗诊断中的实际应用效果。",
            "children": [
                {{
                    "title": "AI辅助肺癌诊断",
                    "level": 3,
                    "summary": "介绍人工智能在肺癌早期检测中的应用及成果。",
                    "children": []
                }},
                {{
                    "title": "AI在糖尿病视网膜病变检测中的应用",
                    "level": 3,
                    "summary": "探讨人工智能技术在糖尿病视网膜病变检测中的作用。",
                    "children": []
                }}
            ]
        }},
        {{
            "title": "挑战与未来发展",
            "level": 2,
            "summary": "分析人工智能在医疗诊断中面临的主要挑战及未来发展趋势。",
            "children": [
                {{
                    "title": "数据隐私与安全",
                    "level": 3,
                    "summary": "讨论医疗数据隐私保护及安全性问题。",
                    "children": []
                }},
                {{
                    "title": "伦理与法律问题",
                    "level": 3,
                    "summary": "探讨人工智能在医疗应用中的伦理和法律挑战。",
                    "children": []
                }},
                {{
                    "title": "技术进步与融合",
                    "level": 3,
                    "summary": "展望人工智能技术在医疗中的未来发展方向。",
                    "children": []
                }}
            ]
        }},
        {{
            "title": "结论",
            "level": 2,
            "summary": "总结人工智能在医疗诊断中的应用成果及其未来潜力。",
            "children": []
        }}
    ]
}}

---
### **你的任务**：

主题：**{topic}**

描述：**{description}**

问题：**{problem}**

输出：
"""

PROMPTS['refine_doc'] = """
---
### **任务描述**

您需要根据提供的"标题"和"概述"，从"相关文档"中提取出该段落写作所需的全部关键信息。要求如下：
1. **保留必要信息**：确保内容完整，不遗漏任何关键点。
2. **删除冗余信息**：剔除重复、无关或不必要的内容。
3. **逻辑清晰**：组织内容结构合理，便于后续写作。
4. **简洁表达**：使用简明扼要的语言进行表述。

只输出精炼后的相关文档，不需要输出任何额外内容和解释。

---
### **示例**

**标题**: 5G技术对智能交通系统的影响

**概述**: 分析5G技术在智能交通系统中的应用，探讨其在提升交通管理效率、提高车辆通信能力和改善道路安全方面的作用，同时指出目前面临的技术挑战和未来发展方向。

**相关文档**: 5G技术以其高速度、低延迟和大连接数的特点，为智能交通系统带来了革命性的变化。首先，5G能够显著提升交通管理系统的响应速度，通过实时数据传输，实现更高效的交通信号控制和拥堵管理。例如，利用5G网络，交通灯可以根据实时交通流量自动调整，从而减少拥堵时间。其次，5G增强了车辆之间以及车辆与基础设施之间的通信能力（V2X），这对于自动驾驶汽车的发展至关重要。高可靠性的通信使得车辆能够更准确地感知周围环境，及时做出反应，极大地提高了行车安全性。此外，5G在车辆远程维修、车载娱乐系统以及车联网服务方面也展现出巨大的潜力。通过5G网络，车辆可以实时接收远程诊断信息，自动更新软件，提高车辆的智能化水平。然而，5G技术在智能交通系统中的应用也面临一些挑战。首先是基础设施建设的高成本问题，覆盖广泛的5G网络需要大量的投资。其次，数据安全和隐私保护也是亟需解决的重要问题，如何在保证高速通信的同时，防止数据泄露和网络攻击，是当前的研究重点。未来，随着5G技术的不断成熟和成本的逐步降低，其在智能交通系统中的应用将更加广泛和深入。结合人工智能、大数据分析等技术，5G有望进一步提升交通管理的智能化水平，推动智慧城市的建设。

**输出**: 5G技术以其高速度、低延迟和大连接数的特点，极大地提升了智能交通系统的效率和安全性。在交通管理方面，5G支持实时数据传输，实现更高效的交通信号控制和拥堵管理，例如交通灯能根据实时流量自动调整，减少拥堵时间。车辆通信方面，5G增强了车辆与车辆（V2V）及车辆与基础设施（V2I）的通信能力（V2X），为自动驾驶提供可靠的支持，使车辆能更准确地感知环境，及时反应，提升行车安全。此外，5G促进了车辆远程维修、车载娱乐系统和车联网服务的发展，通过实时接收远程诊断信息和自动软件更新，提高了车辆的智能化水平。然而，5G在智能交通中的应用也面临基础设施建设成本高、数据安全与隐私保护等挑战。未来，随着5G技术的成熟和成本降低，结合人工智能和大数据分析，5G将在智能交通系统中发挥更为关键的作用，推动智慧城市的进一步发展。

---
### **你的任务**

**标题**: {title}

**概述**: {summary}

**相关文档**: {document}

**输出**: 
"""

PROMPTS['hypothetical_doc'] = """
---
### **任务描述**

您需要根据提供的"标题"和"段落"，判断写作该段落所需的相关文档内容，并生成这些"相关文档"。要求如下：
1. **确定需求**：分析"标题"和"段落"，确定支持写作所需的关键信息和背景资料。
2. **生成相关文档**：编写与段落内容相关且有助于理解和扩展段落的文档。确保信息全面且有条理。
3. **逻辑清晰**：组织内容结构合理，便于后续写作和引用。
4. **简洁表达**：使用简明扼要的语言进行表述。

只输出你生成的相关文档，不需要输出任何额外内容和解释。

---
### **示例**

**标题**: 可再生能源的发展趋势

**段落**: 可再生能源在近年来取得了显著进展，成为全球能源结构转型的重要推动力。风能和太阳能的成本不断下降，使其在能源市场中具备了更强的竞争力。此外，政策支持和技术创新也加速了可再生能源的普及。然而，可再生能源的间歇性和储能技术的不足仍是制约其进一步发展的主要瓶颈。

**输出**: 可再生能源的发展现状\n近年来，全球可再生能源的装机容量持续增长。截至2023年，风能和太阳能的总装机容量分别达到XXXX吉瓦和XXXX吉瓦，占全球发电总量的XX%。特别是在欧洲和中国，风能和太阳能的发展尤为迅速。\n成本趋势\n风能和太阳能的成本在过去十年中显著下降。根据国际可再生能源机构（IRENA）的数据，陆上风电成本下降了XX%，太阳能光伏成本下降了XX%。这一成本下降使得可再生能源在电力市场中的竞争力大幅增强，部分地区的风能和太阳能已具备与传统化石能源竞争的价格优势。\n政策支持\n各国政府纷纷出台支持可再生能源发展的政策，包括补贴、税收优惠、可再生能源配额制等。例如，欧盟的《绿色新政》旨在到2030年将可再生能源在能源结构中的比例提高到XX%。中国也实施了多项政策，如可再生能源电价补贴和绿色信贷，推动可再生能源的快速发展。\n技术创新\n技术创新在推动可再生能源发展的过程中起到了关键作用。高效风电机组和光伏组件的研发提升了能源转换效率，降低了单位能耗成本。此外，智能电网和物联网技术的应用增强了能源管理的智能化和精细化水平，进一步提升了可再生能源的利用效率。\n主要挑战\n尽管可再生能源发展迅速，但其间歇性和储能技术的不足仍是主要瓶颈。风能和太阳能受自然条件影响较大，导致能源供应的不稳定性。当前，储能技术的成本高、效率低，限制了大规模储能系统的应用。此外，电网基础设施的建设和升级也需要大量投资，以适应可再生能源的大规模接入。

---
### **你的任务**

**标题**: {title}

**段落**: {summary}

**输出**: 
"""

PROMPTS['compose_single_paragraph'] = """
---
### **任务描述**

请根据以下论文大纲和相关文档，为指定的"段落标题: 段落概述"撰写一个自然流畅的学术段落。
请注意，你需要编写的是正式的学术文章，而不是对话式的回答。要求如下：
1. 段落应自然流畅，符合学术写作规范。
2. 内容应紧扣段落标题和概述，涵盖相关主题的具体应用。
3. 融合相关文档中的信息，提高内容的深度和可信度。
4. 避免使用对话式语言，保持正式的学术风格。
5. 适当引用相关技术或具体研究成果，以增强内容的权威性。
6. 只需要输出指定段落的内容及其标题，不需要输出其他任何额外内容和解释。

【注意】：
- 这个段落没有子段落，相关文档为外部参考资料（如网页文档和知识库文档）。

---
### **示例1**

**文章大纲**: 
《人工智能在医疗诊断中的应用》
1. 引言: 介绍人工智能在医疗领域的发展背景和研究意义。
2. 人工智能技术概述: 概述人工智能的基本概念、主要技术及其在医疗中的基本应用。
2.1. 机器学习在医疗中的应用: 探讨机器学习算法如何用于疾病预测和诊断。
2.2. 深度学习与影像诊断: 分析深度学习在医学影像分析中的具体应用。
2.2.1. 卷积神经网络在X光图像中的应用: 讨论卷积神经网络如何提高X光图像的诊断准确率。
3. 案例研究: 通过具体案例展示人工智能在医疗诊断中的实际应用效果。
3.1. AI辅助肺癌诊断: 介绍人工智能在肺癌早期检测中的应用及成果。
3.2. AI在糖尿病视网膜病变检测中的应用: 探讨人工智能技术在糖尿病视网膜病变检测中的作用。
4. 挑战与未来发展: 分析人工智能在医疗诊断中面临的主要挑战及未来发展趋势。
4.1. 数据隐私与安全: 讨论医疗数据隐私保护及安全性问题。
4.2. 伦理与法律问题: 探讨人工智能在医疗应用中的伦理和法律挑战。
4.3. 技术进步与融合: 展望人工智能技术在医疗中的未来发展方向。
5. 结论: 总结人工智能在医疗诊断中的应用成果及其未来潜力。

**指定段落**: 2.1. 机器学习在医疗中的应用: 探讨机器学习算法如何用于疾病预测和诊断。

**相关文档**: 
[相关文档1, 相关文档2, ...]

**输出**: 
2.1. 机器学习在医疗中的应用
机器学习算法，特别是监督学习和无监督学习，在疾病预测和诊断中展现了显著的效果。通过分析大量患者数据，机器学习模型能够识别出潜在的疾病模式，从而为早期诊断和治疗提供支持。例如，随机森林和支持向量机等算法已被广泛应用于糖尿病和心脏病的预测中，准确率显著提高。

---
### **您的任务**

**文章大纲**: 
{outline}

**指定段落**: {title}: {summary}

**相关文档**: 
{documents}

**输出**: 
"""

PROMPTS['compose_with_subparagraphs'] = """
---
### **任务描述**

请根据以下论文大纲和相关文档，为指定的"段落标题: 段落概述"及其所有子段落撰写一个自然流畅的学术段落。
请注意，你需要编写的是正式的学术文章，而不是对话式的回答。要求如下：
1. 段落应自然流畅，符合学术写作规范。
2. 内容应紧扣段落标题和概述，涵盖相关主题的具体应用。
3. 融合相关文档中的信息，提高内容的深度和可信度。
4. 避免使用对话式语言，保持正式的学术风格。
5. 适当引用相关技术或具体研究成果，以增强内容的权威性。
6. 只需要输出指定段落（及其所有子段落）的内容及其标题，不需要输出其他任何额外内容和解释。

【注意】：
- 这个段落有子段落，相关文档为其子章节的已生成内容，并请统筹这些子段落的内容进行润色，使整体文章逻辑更加流畅和清晰。

---
### **示例2**

**文章大纲**: 
《人工智能在医疗诊断中的应用》
1. 引言: 介绍人工智能在医疗领域的发展背景和研究意义。
2. 人工智能技术概述: 概述人工智能的基本概念、主要技术及其在医疗中的基本应用。
2.1. 机器学习在医疗中的应用: 探讨机器学习算法如何用于疾病预测和诊断。
2.2. 深度学习与影像诊断: 分析深度学习在医学影像分析中的具体应用。
2.2.1. 卷积神经网络在X光图像中的应用: 讨论卷积神经网络如何提高X光图像的诊断准确率。
3. 案例研究: 通过具体案例展示人工智能在医疗诊断中的实际应用效果。
3.1. AI辅助肺癌诊断: 介绍人工智能在肺癌早期检测中的应用及成果。
3.2. AI在糖尿病视网膜病变检测中的应用: 探讨人工智能技术在糖尿病视网膜病变检测中的作用。
4. 挑战与未来发展: 分析人工智能在医疗诊断中面临的主要挑战及未来发展趋势。
4.1. 数据隐私与安全: 讨论医疗数据隐私保护及安全性问题。
4.2. 伦理与法律问题: 探讨人工智能在医疗应用中的伦理和法律挑战。
4.3. 技术进步与融合: 展望人工智能技术在医疗中的未来发展方向。
5. 结论: 总结人工智能在医疗诊断中的应用成果及其未来潜力。

**指定段落**: 人工智能技术概述: 概述人工智能的基本概念、主要技术及其在医疗中的基本应用。

**相关文档**: 
[段落2.1成文, 段落2.2成文（包含段落2.2.1成文）]

**输出**: 
2. 人工智能的基本概念
人工智能（AI）是计算机科学的一个分支，它旨在创建能够执行通常需要人类智能的任务的机器。AI的核心在于使计算机系统能够模拟人类的认知功能，如学习、推理、自我修正和感知。这些系统能够通过算法和数据处理，实现自主学习和决策。随着技术的进步，AI已经成为推动多个行业，包括医疗领域，创新和变革的重要力量。
    2.1 机器学习在医疗中的应用
    机器学习，作为人工智能的一个子集，已经在医疗领域展现出巨大的潜力。机器学习算法，尤其是监督学习和无监督学习，已经成为疾病预测和诊断的重要工具。通过分析大量的患者数据，这些算法能够识别出潜在的疾病模式，为早期诊断和治疗提供支持。例如，随机森林和支持向量机等算法已被广泛应用于糖尿病和心脏病的预测中，显著提高了准确率。此外，机器学习模型还能够辅助医生在复杂的医疗决策中，通过模式识别和预测分析，提供更加个性化的治疗方案。
    2.2 深度学习与影像诊断
    深度学习，作为机器学习的一个分支，通过使用多层神经网络模拟人脑处理信息的方式，已经在医学影像分析中展现出其强大的能力。深度学习模型能够从影像数据中提取复杂的特征，提高诊断的准确性和效率。在放射学、病理学和眼科等领域，深度学习技术已经被用于自动识别和分类病变，辅助医生做出更快速、更准确的诊断。
        2.2.1 卷积神经网络在X光图像中的应用
        卷积神经网络（CNN）是深度学习中的一种重要架构，特别适用于处理图像数据。在X光图像诊断中，CNN的应用已经成为提高诊断准确率的关键技术。CNN能够处理和分析图像数据，识别出X光图像中的异常模式，如骨折、肺炎和其他骨骼疾病。通过训练，CNN可以学习到专家医生的诊断经验，提高诊断的准确率。例如，在胸部X光图像中，CNN可以识别出肺炎的早期迹象，甚至在症状不明显时也能做出诊断。此外，CNN还可以用于骨龄评估，通过分析手部X光图像，准确估计儿童的骨龄，这对于内分泌疾病的诊断和治疗至关重要。随着技术的不断进步，CNN在X光图像诊断中的应用将越来越广泛，为医疗影像诊断领域带来革命性的变化。

---
### **您的任务**

**文章大纲**: 
{outline}

**指定段落**: {title}: {summary}

**相关文档**: 
{documents}

**输出**: 
"""

PROMPTS['compose_entire_article'] = """
---
### **任务描述**

请根据以下论文大纲和相关文档，为指定的"文章标题:"撰写一篇完整的学术论文。
请注意，你需要编写的是正式的学术文章，而不是对话式的回答。要求如下：
1. 论文应自然流畅，符合学术写作规范。
2. 每个段落及其子段落的内容应紧扣段落标题和概述，涵盖相关主题的具体应用。
3. 融合相关文档中的信息，提高内容的深度和可信度。
4. 避免使用对话式语言，保持正式的学术风格。
5. 适当引用相关技术或具体研究成果，以增强内容的权威性。
6. 只需要输出整篇文章的内容及其所有段落和子段落的标题，不需要输出其他任何额外内容和解释。

【注意】：
- 需要生成整篇文章，包括所有主要段落和子段落。相关文档为所有已生成的段落内容（如"段落1成文, 段落2成文, ..., 段落5成文"）。

---
### **示例3**

**文章大纲**: 
《人工智能在医疗诊断中的应用》
1. 引言: 介绍人工智能在医疗领域的发展背景和研究意义。
2. 人工智能技术概述: 概述人工智能的基本概念、主要技术及其在医疗中的基本应用。
2.1. 机器学习在医疗中的应用: 探讨机器学习算法如何用于疾病预测和诊断。
2.2. 深度学习与影像诊断: 分析深度学习在医学影像分析中的具体应用。
2.2.1. 卷积神经网络在X光图像中的应用: 讨论卷积神经网络如何提高X光图像的诊断准确率。
3. 案例研究: 通过具体案例展示人工智能在医疗诊断中的实际应用效果。
3.1. AI辅助肺癌诊断: 介绍人工智能在肺癌早期检测中的应用及成果。
3.2. AI在糖尿病视网膜病变检测中的应用: 探讨人工智能技术在糖尿病视网膜病变检测中的作用。
4. 挑战与未来发展: 分析人工智能在医疗诊断中面临的主要挑战及未来发展趋势。
4.1. 数据隐私与安全: 讨论医疗数据隐私保护及安全性问题。
4.2. 伦理与法律问题: 探讨人工智能在医疗应用中的伦理和法律挑战。
4.3. 技术进步与融合: 展望人工智能技术在医疗中的未来发展方向。
5. 结论: 总结人工智能在医疗诊断中的应用成果及其未来潜力。

**指定段落**: 《人工智能在医疗诊断中的应用》:

**相关文档**: 
[段落1成文, 段落2成文, ..., 段落5成文]

**输出**: 
《人工智能在医疗诊断中的应用》
1. 引言
...(段落内容)
2. 人工智能技术概述
...(段落内容)
    2.1. 机器学习在医疗中的应用
    ...(段落内容)
    2.2. 深度学习与影像诊断
    ...(段落内容)
        2.2.1. 卷积神经网络在X光图像中的应用
        ...(段落内容)
3. 案例研究
...(段落内容)
    3.1. AI辅助肺癌诊断
    ...(段落内容)
    3.2. AI在糖尿病视网膜病变检测中的应用
    ...(段落内容)
4. 挑战与未来发展
...(段落内容)
    4.1. 数据隐私与安全
    ...(段落内容)
    4.2. 伦理与法律问题
    ...(段落内容)
    4.3. 技术进步与融合
    ...(段落内容)
5. 结论
...(段落内容)

---
### **您的任务**

**文章大纲**: 
{outline}

**指定段落**: {title}: {summary}

**相关文档**: 
{documents}

**输出**: 
"""

# 添加统一检索智能体所需的提示模板
PROMPTS['generate_initial_queries'] = """你是一位专业文献检索专家，现在需要你为一个文章章节设计多个不同角度的检索查询语句。

章节标题: {title}
章节概述: {summary}

请你考虑这个章节可能需要的不同信息角度，设计5-8个不同的检索查询语句。这些查询应该:
1. 覆盖章节内容的不同方面
2. 使用不同的表述和关键词
3. 包括定义类查询、实例类查询、原理类查询等不同类型
4. 使用明确的关键词，避免过于宽泛的表述
5. 考虑可能的相关术语和概念

请仅输出JSON格式的查询列表，不要添加任何解释:
```json
[
  "查询1",
  "查询2",
  "查询3",
  ...
]
```
"""

PROMPTS['evaluate_and_generate_new_queries'] = """你是一位专业的科学写作与文献检索专家。你正在撰写一篇科学文章的章节，并需要判断是否需要进行进一步的信息检索。

章节标题: {title}
章节概述: {summary}

已编写的内容:
---
{current_content}
---

已使用的检索查询:
{previous_queries}

你已经通过这些查询获取到了一些信息，但需要判断当前内容是否足够完整或是否需要更多特定信息。

请分析当前内容，判断是否需要生成新的检索查询来补充信息。如果需要，请生成新的检索查询；如果不需要，请输出特殊标记。

你的回复必须是以下两种形式之一:

1. 如果内容已充分覆盖章节主题，足够全面且准确，请只回复:
```
[RETRIEVAL_COMPLETE]
```

2. 如果还需要进一步检索，请输出JSON格式的新查询列表:
```json
[
  "新查询1",
  "新查询2",
  ...
]
```

请说明每个新查询的目的是为了获取现有内容中缺少的哪些信息。每个查询应该针对性地解决当前内容的不足之处。

评估标准:
- 章节是否涵盖了标题和概述中的所有要点？
- 内容是否有足够的深度和广度？
- 是否有重要概念需要更多的证据或例子支持？
- 是否有相关的最新研究或争议需要补充？
"""

PROMPTS['refine_content_with_new_results'] = """你是一位专业的科学文章写作专家。请根据新检索到的信息，优化和扩展已有的章节内容。

章节标题: {title}
章节概述: {summary}

当前内容:
---
{current_content}
---

新检索到的信息:
{new_results}

请根据这些新信息，优化和扩展当前内容。你的任务是:

1. 识别新信息中的有价值内容，将其整合到现有文本中
2. 保持内容的连贯性和逻辑流畅
3. 确保行文自然，不要生硬地拼接
4. 在使用检索内容时添加适当的引用标记，格式为[source_id]
5. 扩展现有论点，增加深度和细节
6. 如有必要，修正或更新已有内容中的不准确信息

最终输出应是一个完整、连贯、内容丰富的章节文本，包含适当的引用标记。

请只输出优化后的完整内容，不要包含解释或其他附加信息。请确保所有重要的新信息都已整合，并且文本读起来流畅自然。
"""
